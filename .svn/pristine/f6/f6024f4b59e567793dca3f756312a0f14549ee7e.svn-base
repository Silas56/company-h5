!function e(t,o,n){function r(a,s){if(!o[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=o[a]={exports:{}};t[a][0].call(l.exports,function(e){var o=t[a][1][e];return r(o?o:e)},l,l.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,o){var n=function(){};n.prototype.getUrlParam=function(){for(var e=location.search.slice(1),t={},o=e.split("&"),n=0;n<o.length;n++){var r=o[n].split("=");t[r[0]]||(t[r[0]]=r[1])}return t},n.prototype.localStorage={get:function(e){var t="";if("undefined"==typeof localStorage[e])return!1;try{return t=JSON.parse(localStorage[e]),"undefined"!=typeof t.value?t.value:t}catch(o){return localStorage[e]}},set:function(e,t){return"undefined"!=typeof t&&(localStorage[e]=JSON.stringify({value:t}),!0)},del:function(e){"undefined"==typeof localStorage[e]?console.log("this item is not exit!"):delete localStorage[e]}},n.prototype.sessionStorage={get:function(e){var t="";if("undefined"==typeof sessionStorage[e])return"undefined";try{return t=JSON.parse(sessionStorage[e]),"undefined"!=typeof t.value?t.value:t}catch(o){return sessionStorage[e]}},set:function(e,t){return"undefined"!=typeof t&&(sessionStorage[e]=JSON.stringify({value:t}),!0)},del:function(e){"undefined"==typeof sessionStorage[e]?console.log("this item is not exit!"):delete sessionStorage[e]}},n.prototype.config={serverBase:"/m/",knIndex:"/m/nav/kn/index",loginHref:"/m/nav/login",logoutHref:"/m/nav/logout"},"object"==typeof t&&"object"==typeof t.exports?t.exports=new n:window.GlobalKuNiao=n},{}],2:[function(e,t,o){var n=e("../common/global.js"),r={init:function(){var e=n.getUrlParam();e.mobile&&$("#phone").val(e.mobile),this.initBackwards(),this.initp1Form(),this.initResetPassword()},initp1Form:function(){$(".cp_next").click(function(){var e=$("#phone"),t=$(".regcode");e.val().length;if(0===e.val().length)return $.toast("手机号码不能为空！"),e.focus(),!1;if(0===t.val().length)return $.toast("验证码不能为空！"),t.focus(),!1;var o=/^((\+?86)|(\(\+86\)))?(13[0-9]{9}|15[0-9]{9}|18[0-9]{9}|147[0-9]{8}|1349[0-9]{7}|170[0-9]{8})$/;return o.test(e.val())?void r.next():($.toast("请输入11位手机号码"),e.focus(),!1)})},initResetPassword:function(){$(".btnreset").click(function(){var e=$(".password"),t=$(".repsword");return 0===e.val().length?($.toast("密码不能为空！"),e.focus(),!1):0===t.val().length?($.toast("确认密码不能为空！"),t.focus(),!1):void r.resetPassword()})},reg:function(){$.ajax({url:n.config.serverBase+"/api/user/sendRedomCode.json",type:"GET",data:{mobile:$("#phone").val()},success:function(e){e&&"100"===e.code?$.toast("发送成功"):$.toast("error:"+e.msg)}})},initBackwards:function(){$("#btnpass").click(function(){r.time(this,!0)})},time:function(e,t){0===i?(e.removeAttribute("disabled"),e.value="短信获取验证码",i=60):60===i?r.reg():(e.setAttribute("disabled",!0),e.style.backgroundColor="#666666",e.value="重新发送("+i+")",i--,setTimeout(function(){r.time(e,!1)},1e3))},next:function(){var e={mobile:$("#phone").val(),redomCode:$(".regcode").val()};$.ajax({url:n.config.serverBase+"api/user/proveRedomCode.json",type:"POST",data:JSON.stringify(e),contentType:"application/json",success:function(e){e&&"100"===e.code?window.location.href="changepassword2.html":$.toast("error:"+e.msg)}})},resetPassword:function(){var e={newpwd:$(".password").val(),confirmNewpwd:$(".repsword").val()};$.ajax({url:n.config.serverBase+"/api/user/updatePassword.json",type:"POST",data:JSON.stringify(e),contentType:"application/json",success:function(e){e&&"100"===e.code?window.location.href="accountsafe.html":$.toast("error:"+e.msg)}})}},i=60;$(document).on("pageInit","#changepassword1",function(e,t,o){r.init()}),$(document).on("pageInit","#changepassword2",function(e,t,o){r.init()})},{"../common/global.js":1}]},{},[2]);
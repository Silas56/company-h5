!function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var p="function"==typeof require&&require;if(!a&&p)return p(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,n){!function(t){function o(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function r(){this.raw=[],this.length=0}function i(){return"___"+P++}function s(t,e){var n=new Function;n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t){return A[t]}function p(t){return'"'+t.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function l(t){return t.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(t){return"\\"+t})}function c(t){var e=arguments;return t.replace(/\{([0-9]+)\}/g,function(t,n){return e[n-0+1]})}function h(t){return t=t.replace(/^\s*\*/,""),c('gv({0},["{1}"])',p(t),t.replace(/\[['"]?([^'"]+)['"]?\]/g,function(t,e){return"."+e}).split(".").join('","'))}function f(t,e,n,o,r,i){for(var s=n.length,a=t.split(e),p=0,l=[],c=0,h=a.length;h>c;c++){var f=a[c];if(c){var u=1;for(p++;;){var d=f.indexOf(n);if(0>d){l.push(p>1&&u?e:"",f);break}if(p=o?p-1:0,l.push(p>0&&u?e:"",f.slice(0,d),p>0?n:""),f=f.slice(d+s),u=0,0===p)break}0===p&&(r(l.join("")),i(f),l=[])}else f&&i(f)}p>0&&l.length>0&&(i(e),i(l.join("")))}function u(t,e,n){var o,r=[],i=e.options,s="",a="",l="",c="";return n&&(s="ts(",a=")",l=D,c=N,o=i.defaultFilter),f(t,i.variableOpen,i.variableClose,1,function(t){n&&t.indexOf("|")<0&&o&&(t+="|"+o);var i=t.indexOf("|"),p=(i>0?t.slice(0,i):t).replace(/^\s+/,"").replace(/\s+$/,""),f=i>0?t.slice(i+1):"",d=0===p.indexOf("*"),g=[d?"":s,h(p),d?"":a];if(f){f=u(f,e);for(var v=f.split("|"),y=0,m=v.length;m>y;y++){var x=v[y];/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(x)&&(g.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3&&g.push(",",RegExp.$3),g.push(")"))}}r.push(l,g.join(""),c)},function(t){r.push(l,n?p(t):t,c)}),r.join("")}function d(t,e){this.value=t,this.engine=e}function g(t,e){this.value=t,this.engine=e,this.children=[],this.cloneProps=[]}function v(t,e){var n=t.stack,o=e?n.find(function(t){return t instanceof e}):n.bottom();if(o){for(var r;(r=n.top())!==o;){if(!r.autoClose)throw new Error(r.type+" must be closed manually: "+r.value);r.autoClose(t)}o.close(t)}return o}function y(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.master=RegExp.$3,this.name=RegExp.$1,g.call(this,t,e),this.blocks={}}function m(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,g.call(this,t,e),this.cloneProps=["name"]}function x(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,g.call(this,t,e),this.cloneProps=["name","state","blocks","target"],this.blocks={}}function $(t,e){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.expr=RegExp.$2,g.call(this,t,e),this.cloneProps=["name","expr"]}function E(t,e){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.args=RegExp.$3,g.call(this,t,e),this.cloneProps=["name","args"]}function _(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.args=RegExp.$3,g.call(this,t,e),this.cloneProps=["name","args"]}function w(t,e){var n=new RegExp(c("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",l(e.options.variableOpen),l(e.options.variableClose)),"i");if(!n.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,g.call(this,t,e),this.cloneProps=["list","item","index"]}function R(t,e){g.call(this,t,e)}function b(t,e){R.call(this,t,e)}function S(t,e){g.call(this,t,e)}function k(t,e){e.target=t;var n=e.engine,o=t.name;if(n.targets[o])switch(n.options.namingConflict){case"override":n.targets[o]=t,e.targets.push(o);case"ignore":break;default:throw new Error("[ETPL_TARGET_EXISTS]"+o)}else n.targets[o]=t,e.targets.push(o)}function C(t,e){G[t]=e,e.prototype.type=t}function I(t){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]*)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(t),this.targets={},this.filters=o({},j)}function O(t,e){function n(){var t;if(c.length>0&&(t=c.join(""))){var n=new d(t,e);n.beforeAdd(l),p.top().addChild(n),c=[],e.options.strip&&l.current instanceof g&&(n.value=t.replace(/^[\x20\t\r]*\n/,"")),l.current=n}}var o,i=e.options.commandOpen,s=e.options.commandClose,a=e.options.commandSyntax,p=new r,l={engine:e,targets:[],stack:p,target:null},c=[];return f(t,i,s,0,function(t){var r,p=a.exec(t);if(p&&(r=p[2]||"target")&&(o=G[r.toLowerCase()])&&"function"==typeof o){n();var h=l.current;e.options.strip&&h instanceof d&&(h.value=h.value.replace(/\r?\n[\x20\t]*$/,"\n")),p[1]?h=v(l,o):(h=new o(p[3],e),"function"==typeof h.beforeOpen&&h.beforeOpen(l),h.open(l)),l.current=h}else/^\s*\/\//.test(t)||c.push(i,t,s);o=null},function(t){c.push(t)}),n(),v(l),l.targets}r.prototype={push:function(t){this.raw[this.length++]=t},pop:function(){if(this.length>0){var t=this.raw[--this.length];return this.raw.length=this.length,t}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(t){for(var e=this.length;e--;){var n=this.raw[e];if(t(n))return n}}};var P=178245,A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},j={html:function(t){return t.replace(/[&<>"']/g,a)},url:encodeURIComponent,raw:function(t){return t}},B='var r="";',D="r+=",N=";",T="return r;";"undefined"!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8&&(B="var r=[],ri=0;",D="r[ri++]=",T='return r.join("");'),d.prototype={getRendererBody:function(){var t=this.value,e=this.engine.options;return!t||e.strip&&/^\s*$/.test(t)?"":u(t,this.engine,1)},clone:function(){return this}},g.prototype={addChild:function(t){this.children.push(t)},open:function(t){var e=t.stack.top();e&&e.addChild(this),t.stack.push(this)},close:function(t){t.stack.top()===this&&t.stack.pop()},getRendererBody:function(){for(var t=[],e=this.children,n=0;n<e.length;n++)t.push(e[n].getRendererBody());return t.join("")},clone:function(){for(var t=this.constructor,e=new t(this.value,this.engine),n=0,o=this.children.length;o>n;n++)e.addChild(this.children[n].clone());for(var n=0,o=this.cloneProps.length;o>n;n++){var r=this.cloneProps[n];e[r]=this[r]}return e}};var z='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';s(y,g),s(m,g),s(x,g),s($,g),s(E,g),s(_,g),s(w,g),s(R,g),s(b,R),s(S,R);var L={READING:1,READED:2,APPLIED:3,READY:4};x.prototype.applyMaster=y.prototype.applyMaster=function(t){function e(t){var o=t.children;if(o instanceof Array)for(var r=0,i=o.length;i>r;r++){var s=o[r];s instanceof m&&n[s.name]&&(s=o[r]=n[s.name]),e(s)}}if(this.state>=L.APPLIED)return 1;var n=this.blocks,o=this.engine.targets[t];if(o){if(o.applyMaster(o.master))return this.children=o.clone().children,e(this),this.state=L.APPLIED,1}else if("error"===this.engine.options.missTarget)throw new Error("[ETPL_MISS_TARGET]"+t+", when extended by "+(this.target?this.target.name:this.name))},y.prototype.isReady=function(){function t(r){for(var i=0,s=r.children.length;s>i;i++){var a=r.children[i];if(a instanceof x){var p=e.targets[a.name];if(!p&&"error"===e.options.missTarget)throw new Error("[ETPL_MISS_TARGET]"+a.name+", when imported by "+n);o=o&&p&&p.isReady(e)}else a instanceof g&&t(a)}}if(this.state>=L.READY)return 1;var e=this.engine,n=this.name,o=1;return this.applyMaster(this.master)?(t(this),o&&(this.state=L.READY),o):void 0},y.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var t=new Function("data","engine",[z,B,this.getRendererBody(),T].join("\n")),e=this.engine;return this.renderer=function(n){return t(n,e)},this.renderer}return null},y.prototype.open=function(t){v(t),g.prototype.open.call(this,t),this.state=L.READING,k(this,t)},$.prototype.open=_.prototype.open=function(t){t.stack.top().addChild(this)},m.prototype.open=function(t){g.prototype.open.call(this,t),t.stack.find(function(t){return t.blocks}).blocks[this.name]=this},b.prototype.open=function(t){var e=new S;e.open(t);var n=v(t,R);n.addChild(this),t.stack.push(this)},S.prototype.open=function(t){var e=v(t,R);e.addChild(this),t.stack.push(this)},x.prototype.open=function(t){this.parent=t.stack.top(),this.target=t.target,g.prototype.open.call(this,t),this.state=L.READING},_.prototype.close=$.prototype.close=function(){},x.prototype.close=function(t){g.prototype.close.call(this,t),this.state=L.READED},y.prototype.close=function(t){g.prototype.close.call(this,t),this.state=this.master?L.READED:L.APPLIED,t.target=null},x.prototype.autoClose=function(t){var e=this.parent.children;e.push.apply(e,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(t)},_.prototype.beforeOpen=x.prototype.beforeOpen=$.prototype.beforeOpen=w.prototype.beforeOpen=E.prototype.beforeOpen=m.prototype.beforeOpen=R.prototype.beforeOpen=d.prototype.beforeAdd=function(t){if(!t.stack.bottom()){var e=new y(i(),t.engine);e.open(t)}},x.prototype.getRendererBody=function(){return this.applyMaster(this.name),g.prototype.getRendererBody.call(this)},_.prototype.getRendererBody=function(){return c("{0}engine.render({2},{{3}}){1}",D,N,p(this.name),u(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(t,e,n){return(e||"")+p(n)+":"}))},$.prototype.getRendererBody=function(){return this.expr?c("v[{0}]={1};",p(this.name),u(this.expr,this.engine)):""},R.prototype.getRendererBody=function(){return c("if({0}){{1}}",u(this.value,this.engine),g.prototype.getRendererBody.call(this))},S.prototype.getRendererBody=function(){return c("}else{{0}",g.prototype.getRendererBody.call(this))},w.prototype.getRendererBody=function(){return c('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',i(),u(this.list,this.engine),p(this.index||i()),p(this.item),i(),i(),g.prototype.getRendererBody.call(this))},E.prototype.getRendererBody=function(){var t=this.args;return c("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",B,T,D,N,g.prototype.getRendererBody.call(this),p(this.name),t?","+u(t,this.engine):"")};var G={};C("target",y),C("block",m),C("import",x),C("use",_),C("var",$),C("for",w),C("if",R),C("elif",b),C("else",S),C("filter",E),I.prototype.config=function(t){o(this.options,t)},I.prototype.compile=I.prototype.parse=function(t){if(t){var e=O(t,this);if(e.length)return this.targets[e[0]].getRenderer()}return new Function('return ""')},I.prototype.getRenderer=function(t){var e=this.targets[t];return e?e.getRenderer():void 0},I.prototype.render=function(t,e){var n=this.getRenderer(t);return n?n(e):""},I.prototype.addFilter=function(t,e){"function"==typeof e&&(this.filters[t]=e)};var M=new I;M.Engine=I,M.version="3.1.0","object"==typeof n&&"object"==typeof e?n=e.exports=M:"function"==typeof define&&define.amd?define(M):t.etpl=M}(this)},{}],2:[function(t,e,n){var o=function(){};o.prototype.getUrlParam=function(){for(var t=location.search.slice(1),e={},n=t.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");e[r[0]]||(e[r[0]]=r[1])}return e},o.prototype.localStorage={get:function(t){var e="";if("undefined"==typeof localStorage[t])return!1;try{return e=JSON.parse(localStorage[t]),"undefined"!=typeof e.value?e.value:e}catch(n){return localStorage[t]}},set:function(t,e){return"undefined"!=typeof e&&(localStorage[t]=JSON.stringify({value:e}),!0)},del:function(t){"undefined"==typeof localStorage[t]?console.log("this item is not exit!"):delete localStorage[t]}},o.prototype.sessionStorage={get:function(t){var e="";if("undefined"==typeof sessionStorage[t])return"undefined";try{return e=JSON.parse(sessionStorage[t]),"undefined"!=typeof e.value?e.value:e}catch(n){return sessionStorage[t]}},set:function(t,e){return"undefined"!=typeof e&&(sessionStorage[t]=JSON.stringify({value:e}),!0)},del:function(t){"undefined"==typeof sessionStorage[t]?console.log("this item is not exit!"):delete sessionStorage[t]}},o.prototype.config={serverBase:"/m/",knIndex:"/m/nav/kn/index",loginHref:"/m/nav/login",logoutHref:"/m/nav/logout"},"object"==typeof e&&"object"==typeof e.exports?e.exports=new o:window.GlobalKuNiao=o},{}],3:[function(t,e,n){var o=t("../common/global.js"),r=t("../common/etpl.js"),i=t("./tpl/allShop.html"),s={param:{pageNum:1,maxItem:10},init:function(){this.getShops(1,10),$(".content .datalist").html("")},getShops:function(t,e){$.ajax({url:o.config.serverBase+"api/shop/shopList.json",type:"GET",data:{pageNum:t,pageSize:e},success:function(n){if(n&&"100"==n.code){s.param.maxItem=n.allShopPage.total;var a=n.allShopPage.allShopBeans;if(a&&a.length>0){var p=r.compile(i),l={shops:a},c=p(l);if($(".content .datalist").append(c),$(".content-block .product_list").click(function(){var t=$(this).find(".shopCode").val();window.location.href="../index/index.html?shopCode="+t}),t+e>=n.allShopPage.total){var h=$(".infinite-scroll");$.detachInfiniteScroll(h),$(".infinite-scroll-preloader").hide();var f=h.find(".nomore");0===f.length&&h.find(".datalist").append("<div class='nomore'>---- 没有更多了 ----</div>")}}else $(".infinite-scroll-preloader").addClass("d-n"),$(".noshop").removeClass("d-n")}else n&&"403"==n.code?$.alert("你还未登陆哦，请先登陆！",function(){location.href=o.config.loginHref}):n&&"106"==n.code?($(".infinite-scroll-preloader").addClass("d-n"),$(".noshop").removeClass("d-n")):$.toast("error:"+n.msg)}})}};$(document).on("pageInit","#allShop_page",function(t,e,n){s.init();var o=!1,r=10;$(n).on("infinite",function(){if(!o){o=!0;var t=$(".content .datalist .content-block").length;setTimeout(function(){if(o=!1,!s.param.maxItem||t>=s.param.maxItem){var e=$(".infinite-scroll");$(".infinite-scroll-preloader").hide();var n=e.find(".nomore");return void(0===n.length&&e.find(".datalist").append("<div class='nomore'>---- 没有更多了 ----</div>"))}s.param.pageNum++,s.getShops(s.param.pageNum,r),t=$(".content .datalist .content-block").length,$.refreshScroller()},1e3)}})})},{"../common/etpl.js":1,"../common/global.js":2,"./tpl/allShop.html":4}],4:[function(t,e,n){e.exports='<!-- for: ${shops} as ${shop} --><div class="content-block">  <div class="product_list">    <input type="hidden" class="shopCode" value="${shop.shopOutCode}"/>    <div class="product_list_l">      <!-- if: ${shop.shopLogoImg} -->        <img src="${shop.shopLogoImg}">      <!-- else -->        <img src="../../images/home/shop_default.jpg" />      <!-- /if -->    </div>    <div class="product_list_r">      <div class="product_list_r_title">${shop.shopName}</div>      <!-- if: ${shop.owner} == 1 -->          <span class="product_list_r_role">店铺拥有者</span>      <!-- else -->          <span class="product_list_r_role">${shop.roleName}</span>      <!-- /if -->      <!-- if: ${shop.shopStatus} == 1 -->        <span class="product_list_r_status">  (审核中)</span>      <!-- /if -->        <!-- if: ${shop.shopStatus} == 2 -->        <span class="product_list_r_status">  (正常营业)</span>      <!-- /if -->      <!-- if: ${shop.shopStatus} == 3 -->        <span class="product_list_r_status">  (审核未通过)</span>      <!-- /if -->        <!-- if: ${shop.shopStatus} == 4 -->        <span class="product_list_r_status">  (暂停营业)</span>      <!-- /if -->        <!-- if: ${shop.shopStatus} == 5 -->        <span class="product_list_r_status">  (已冻结)</span>      <!-- /if -->       </div>    <div class="product_list_r2">    \t<span class="icon icon-right"></span>    </div>  </div></div><!-- /for -->'},{}]},{},[3]);
!function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){var n=e[a][1][t];return o(n?n:t)},p,p.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){!function(t){function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function o(){this.raw=[],this.length=0}function r(){return"___"+S++}function a(t,e){var n=new Function;n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function s(t){return N[t]}function c(t){return'"'+t.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function l(t){return t.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(t){return"\\"+t})}function p(t){var e=arguments;return t.replace(/\{([0-9]+)\}/g,function(t,n){return e[n-0+1]})}function f(t){return t=t.replace(/^\s*\*/,""),p('gv({0},["{1}"])',c(t),t.replace(/\[['"]?([^'"]+)['"]?\]/g,function(t,e){return"."+e}).split(".").join('","'))}function u(t,e,n,i,o,r){for(var a=n.length,s=t.split(e),c=0,l=[],p=0,f=s.length;f>p;p++){var u=s[p];if(p){var h=1;for(c++;;){var d=u.indexOf(n);if(0>d){l.push(c>1&&h?e:"",u);break}if(c=i?c-1:0,l.push(c>0&&h?e:"",u.slice(0,d),c>0?n:""),u=u.slice(d+a),h=0,0===c)break}0===c&&(o(l.join("")),r(u),l=[])}else u&&r(u)}c>0&&l.length>0&&(r(e),r(l.join("")))}function h(t,e,n){var i,o=[],r=e.options,a="",s="",l="",p="";return n&&(a="ts(",s=")",l=P,p=B,i=r.defaultFilter),u(t,r.variableOpen,r.variableClose,1,function(t){n&&t.indexOf("|")<0&&i&&(t+="|"+i);var r=t.indexOf("|"),c=(r>0?t.slice(0,r):t).replace(/^\s+/,"").replace(/\s+$/,""),u=r>0?t.slice(r+1):"",d=0===c.indexOf("*"),m=[d?"":a,f(c),d?"":s];if(u){u=h(u,e);for(var g=u.split("|"),v=0,y=g.length;y>v;v++){var $=g[v];/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test($)&&(m.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3&&m.push(",",RegExp.$3),m.push(")"))}}o.push(l,m.join(""),p)},function(t){o.push(l,n?c(t):t,p)}),o.join("")}function d(t,e){this.value=t,this.engine=e}function m(t,e){this.value=t,this.engine=e,this.children=[],this.cloneProps=[]}function g(t,e){var n=t.stack,i=e?n.find(function(t){return t instanceof e}):n.bottom();if(i){for(var o;(o=n.top())!==i;){if(!o.autoClose)throw new Error(o.type+" must be closed manually: "+o.value);o.autoClose(t)}i.close(t)}return i}function v(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.master=RegExp.$3,this.name=RegExp.$1,m.call(this,t,e),this.blocks={}}function y(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,m.call(this,t,e),this.cloneProps=["name"]}function $(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,m.call(this,t,e),this.cloneProps=["name","state","blocks","target"],this.blocks={}}function b(t,e){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.expr=RegExp.$2,m.call(this,t,e),this.cloneProps=["name","expr"]}function x(t,e){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.args=RegExp.$3,m.call(this,t,e),this.cloneProps=["name","args"]}function k(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.name=RegExp.$1,this.args=RegExp.$3,m.call(this,t,e),this.cloneProps=["name","args"]}function w(t,e){var n=new RegExp(p("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",l(e.options.variableOpen),l(e.options.variableClose)),"i");if(!n.test(t))throw new Error("Invalid "+this.type+" syntax: "+t);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,m.call(this,t,e),this.cloneProps=["list","item","index"]}function E(t,e){m.call(this,t,e)}function R(t,e){E.call(this,t,e)}function T(t,e){m.call(this,t,e)}function j(t,e){e.target=t;var n=e.engine,i=t.name;if(n.targets[i])switch(n.options.namingConflict){case"override":n.targets[i]=t,e.targets.push(i);case"ignore":break;default:throw new Error("[ETPL_TARGET_EXISTS]"+i)}else n.targets[i]=t,e.targets.push(i)}function C(t,e){U[t]=e,e.prototype.type=t}function I(t){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]*)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(t),this.targets={},this.filters=i({},O)}function _(t,e){function n(){var t;if(p.length>0&&(t=p.join(""))){var n=new d(t,e);n.beforeAdd(l),c.top().addChild(n),p=[],e.options.strip&&l.current instanceof m&&(n.value=t.replace(/^[\x20\t\r]*\n/,"")),l.current=n}}var i,r=e.options.commandOpen,a=e.options.commandClose,s=e.options.commandSyntax,c=new o,l={engine:e,targets:[],stack:c,target:null},p=[];return u(t,r,a,0,function(t){var o,c=s.exec(t);if(c&&(o=c[2]||"target")&&(i=U[o.toLowerCase()])&&"function"==typeof i){n();var f=l.current;e.options.strip&&f instanceof d&&(f.value=f.value.replace(/\r?\n[\x20\t]*$/,"\n")),c[1]?f=g(l,i):(f=new i(c[3],e),"function"==typeof f.beforeOpen&&f.beforeOpen(l),f.open(l)),l.current=f}else/^\s*\/\//.test(t)||p.push(r,t,a);i=null},function(t){p.push(t)}),n(),g(l),l.targets}o.prototype={push:function(t){this.raw[this.length++]=t},pop:function(){if(this.length>0){var t=this.raw[--this.length];return this.raw.length=this.length,t}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(t){for(var e=this.length;e--;){var n=this.raw[e];if(t(n))return n}}};var S=178245,N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},O={html:function(t){return t.replace(/[&<>"']/g,s)},url:encodeURIComponent,raw:function(t){return t}},A='var r="";',P="r+=",B=";",D="return r;";"undefined"!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8&&(A="var r=[],ri=0;",P="r[ri++]=",D='return r.join("");'),d.prototype={getRendererBody:function(){var t=this.value,e=this.engine.options;return!t||e.strip&&/^\s*$/.test(t)?"":h(t,this.engine,1)},clone:function(){return this}},m.prototype={addChild:function(t){this.children.push(t)},open:function(t){var e=t.stack.top();e&&e.addChild(this),t.stack.push(this)},close:function(t){t.stack.top()===this&&t.stack.pop()},getRendererBody:function(){for(var t=[],e=this.children,n=0;n<e.length;n++)t.push(e[n].getRendererBody());return t.join("")},clone:function(){for(var t=this.constructor,e=new t(this.value,this.engine),n=0,i=this.children.length;i>n;n++)e.addChild(this.children[n].clone());for(var n=0,i=this.cloneProps.length;i>n;n++){var o=this.cloneProps[n];e[o]=this[o]}return e}};var z='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';a(v,m),a(y,m),a($,m),a(b,m),a(x,m),a(k,m),a(w,m),a(E,m),a(R,E),a(T,E);var L={READING:1,READED:2,APPLIED:3,READY:4};$.prototype.applyMaster=v.prototype.applyMaster=function(t){function e(t){var i=t.children;if(i instanceof Array)for(var o=0,r=i.length;r>o;o++){var a=i[o];a instanceof y&&n[a.name]&&(a=i[o]=n[a.name]),e(a)}}if(this.state>=L.APPLIED)return 1;var n=this.blocks,i=this.engine.targets[t];if(i){if(i.applyMaster(i.master))return this.children=i.clone().children,e(this),this.state=L.APPLIED,1}else if("error"===this.engine.options.missTarget)throw new Error("[ETPL_MISS_TARGET]"+t+", when extended by "+(this.target?this.target.name:this.name))},v.prototype.isReady=function(){function t(o){for(var r=0,a=o.children.length;a>r;r++){var s=o.children[r];if(s instanceof $){var c=e.targets[s.name];if(!c&&"error"===e.options.missTarget)throw new Error("[ETPL_MISS_TARGET]"+s.name+", when imported by "+n);i=i&&c&&c.isReady(e)}else s instanceof m&&t(s)}}if(this.state>=L.READY)return 1;var e=this.engine,n=this.name,i=1;return this.applyMaster(this.master)?(t(this),i&&(this.state=L.READY),i):void 0},v.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var t=new Function("data","engine",[z,A,this.getRendererBody(),D].join("\n")),e=this.engine;return this.renderer=function(n){return t(n,e)},this.renderer}return null},v.prototype.open=function(t){g(t),m.prototype.open.call(this,t),this.state=L.READING,j(this,t)},b.prototype.open=k.prototype.open=function(t){t.stack.top().addChild(this)},y.prototype.open=function(t){m.prototype.open.call(this,t),t.stack.find(function(t){return t.blocks}).blocks[this.name]=this},R.prototype.open=function(t){var e=new T;e.open(t);var n=g(t,E);n.addChild(this),t.stack.push(this)},T.prototype.open=function(t){var e=g(t,E);e.addChild(this),t.stack.push(this)},$.prototype.open=function(t){this.parent=t.stack.top(),this.target=t.target,m.prototype.open.call(this,t),this.state=L.READING},k.prototype.close=b.prototype.close=function(){},$.prototype.close=function(t){m.prototype.close.call(this,t),this.state=L.READED},v.prototype.close=function(t){m.prototype.close.call(this,t),this.state=this.master?L.READED:L.APPLIED,t.target=null},$.prototype.autoClose=function(t){var e=this.parent.children;e.push.apply(e,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(t)},k.prototype.beforeOpen=$.prototype.beforeOpen=b.prototype.beforeOpen=w.prototype.beforeOpen=x.prototype.beforeOpen=y.prototype.beforeOpen=E.prototype.beforeOpen=d.prototype.beforeAdd=function(t){if(!t.stack.bottom()){var e=new v(r(),t.engine);e.open(t)}},$.prototype.getRendererBody=function(){return this.applyMaster(this.name),m.prototype.getRendererBody.call(this)},k.prototype.getRendererBody=function(){return p("{0}engine.render({2},{{3}}){1}",P,B,c(this.name),h(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(t,e,n){return(e||"")+c(n)+":"}))},b.prototype.getRendererBody=function(){return this.expr?p("v[{0}]={1};",c(this.name),h(this.expr,this.engine)):""},E.prototype.getRendererBody=function(){return p("if({0}){{1}}",h(this.value,this.engine),m.prototype.getRendererBody.call(this))},T.prototype.getRendererBody=function(){return p("}else{{0}",m.prototype.getRendererBody.call(this))},w.prototype.getRendererBody=function(){return p('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',r(),h(this.list,this.engine),c(this.index||r()),c(this.item),r(),r(),m.prototype.getRendererBody.call(this))},x.prototype.getRendererBody=function(){var t=this.args;return p("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",A,D,P,B,m.prototype.getRendererBody.call(this),c(this.name),t?","+h(t,this.engine):"")};var U={};C("target",v),C("block",y),C("import",$),C("use",k),C("var",b),C("for",w),C("if",E),C("elif",R),C("else",T),C("filter",x),I.prototype.config=function(t){i(this.options,t)},I.prototype.compile=I.prototype.parse=function(t){if(t){var e=_(t,this);if(e.length)return this.targets[e[0]].getRenderer()}return new Function('return ""')},I.prototype.getRenderer=function(t){var e=this.targets[t];return e?e.getRenderer():void 0},I.prototype.render=function(t,e){var n=this.getRenderer(t);return n?n(e):""},I.prototype.addFilter=function(t,e){"function"==typeof e&&(this.filters[t]=e)};var F=new I;F.Engine=I,F.version="3.1.0","object"==typeof n&&"object"==typeof e?n=e.exports=F:"function"==typeof define&&define.amd?define(F):t.etpl=F}(this)},{}],2:[function(t,e,n){var i=function(){};i.prototype.getUrlParam=function(){for(var t=location.search.slice(1),e={},n=t.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");e[o[0]]||(e[o[0]]=o[1])}return e},i.prototype.localStorage={get:function(t){var e="";if("undefined"==typeof localStorage[t])return!1;try{return e=JSON.parse(localStorage[t]),"undefined"!=typeof e.value?e.value:e}catch(n){return localStorage[t]}},set:function(t,e){return"undefined"!=typeof e&&(localStorage[t]=JSON.stringify({value:e}),!0)},del:function(t){"undefined"==typeof localStorage[t]?console.log("this item is not exit!"):delete localStorage[t]}},i.prototype.sessionStorage={get:function(t){var e="";if("undefined"==typeof sessionStorage[t])return"undefined";try{return e=JSON.parse(sessionStorage[t]),"undefined"!=typeof e.value?e.value:e}catch(n){return sessionStorage[t]}},set:function(t,e){return"undefined"!=typeof e&&(sessionStorage[t]=JSON.stringify({value:e}),!0)},del:function(t){"undefined"==typeof sessionStorage[t]?console.log("this item is not exit!"):delete sessionStorage[t]}},i.prototype.config={serverBase:"/m/",knIndex:"/m/nav/kn/index",loginHref:"/m/nav/login",logoutHref:"/m/nav/logout"},"object"==typeof e&&"object"==typeof e.exports?e.exports=new i:window.GlobalKuNiao=i},{}],3:[function(t,e,n){var i=t("../common/global.js"),o=t("../common/etpl.js"),r=t("./tpl/informationList.html");o.addFilter("certTypeFormart",function(t){var e=parseInt(t,10),n="";switch(e){case 1:n="身份证";break;case 2:n="护照";break;case 3:n="其他";break;case 4:n="港澳通行证";break;case 5:n="军官证";break;case 6:n="学生证";break;default:n=""}return n});var a="",s={init:function(){var t=i.getUrlParam(),e=t.name;e&&(e=decodeURIComponent(e),$(".changename_inp").val(e)),this.initChangeNick(),$.ajax({type:"GET",url:i.config.serverBase+"/api/user/getUserInfo.json",success:function(t){t&&"100"===t.code||(t&&"403"===t.code?window.location.href=i.config.loginHref:$.toast("error:"+t.msg))}})},initChangeNick:function(){$(".changename_btn").click(function(){var t=$(".changename_inp").val();return 0===t.trim().length?void $.toast("昵称不能为空"):t.match(/^(([a-zA-Z\u4e00-\u9fa5]|[-_]|[\b]){3,10})$/)?t.trim().length<3||t.trim().length>10?void $.toast('昵称3~10位中英文、"-"、"_"'):void $.ajax({url:i.config.serverBase+"api/user/updateUser.json",type:"GET",data:{type:1,value:t},success:function(t){t&&"100"===t.code?($.toast("修改成功"),window.location.href="accountsetting.html"):t&&"403"===t.code?window.location.href=i.config.loginHref:$.toast(t.msg)}}):void $.toast('昵称3~10位中英文、"-"、"_"')})}},c={init:function(){this.getContacts()},getContacts:function(){var t=this,e=i.config.serverBase+"api/usercommon/getList.json",n={page_num:1,page_size:20};$.ajax({url:e,type:"get",data:n,dataType:"json",success:function(e){"100"===e.code?t.renderList(e.userCommonContactList):"403"===e.code?location.href=i.config.loginHref:"102"===e.code?t.renderList([]):$.toast(e.msg)}})},renderList:function(t){var e=o.compile(r),n=e({data:t});$(".user-information").find(".info-list").html(n),this.setDefault(),this.edit(),this.del(),$(".addInformation-btn").css("display","block")},del:function(){var t=$(".user-information").find(".info-list"),e=i.config.serverBase+"api/usercommon/delete.json";t.off("click").on("click",".del",function(){var t=$(this).parents(".item"),n=$(this).attr("data-code");$.confirm("确定要删除吗？",function(){$.ajax({url:e,type:"get",data:{code:n},dataType:"json",success:function(e){if("100"===e.code)$.toast("删除成功！"),t.remove();else if("403"===e.code){var n=location.href;n=encodeURIComponent(n),$.ajax({url:"/m/api/global/visited.json?url="+n,type:"get",dataType:"json",success:function(){window.location.href=i.config.loginHref}})}else $.toast(e.msg)}})},function(){})})},edit:function(){var t=$(".user-information").find(".info-list .edit");t.off("click").on("click",function(){var t=$(this).attr("data-code"),e=$(this).data("name"),n=$(this).data("mobile"),i=$(this).data("email"),o=$(this).data("certtype"),r=$(this).data("certtext"),s=$(this).data("certnumber");a={code:t,name:e,mobile:n,email:i,certType:o,certText:r,certNumber:s},$.router.load("#homeEditInformation")})},setDefault:function(){$(".set-default").off("click").on("click",function(){var t=$(this);if(t.hasClass("default"))return!1;var e=i.config.serverBase+"api/usercommon/setDefault.json",n=$(this).attr("data-code");$.ajax({url:e,type:"get",dataType:"json",data:{code:n},success:function(e){if("100"===e.code)$.toast("设置成功！"),$(".set-default").removeClass("default"),t.addClass("default");else if("403"===e.code){var n=location.href;n=encodeURIComponent(n),$.ajax({url:"/m/api/global/visited.json?url="+n,type:"get",dataType:"json",success:function(){window.location.href=i.config.loginHref}})}else $.toast(e.msg)}})})}},l={param:{nickname:"",mobile:"",email:"",certType:"",certNumber:""},init:function(){$("input").val(""),this.verifincation(),this.param={nickname:"",mobile:"",email:"",certType:"",certNumber:""}},verifincation:function(){var t=this,e=$("#homeAddInformation").find(".add-information");e.on("change",'input[name="mobile"]',function(){var e=$(this).val();t.param.mobile=e}),e.on("change",'input[name="name"]',function(){var e=$(this).val();t.param.nickname=e}),e.on("change",'input[name="email"]',function(){var e=$(this).val();t.param.email=e}),e.find('input[name="certType"]').off("click").on("click",function(){var e=$(this);$.modal({title:"请选择证件类型",verticalButtons:!0,extraClass:"popup-certType",buttons:[{text:"身份证",close:!0,onClick:function(){t.param.certType=1,e.val("身份证")}},{text:"港澳通行证",close:!0,onClick:function(){t.param.certType=4,e.val("港澳通行证")}},{text:"学生证",close:!0,onClick:function(){t.param.certType=6,e.val("学生证")}},{text:"军官证",close:!0,onClick:function(){t.param.certType=5,e.val("军官证")}}]})}),e.on("change",'input[name="certNumber"]',function(){var e=$(this).val();t.param.certNumber=e}),e.off("click").on("click",".save-btn",function(){return""===t.param.nickname?($.toast("请输入昵称！"),!1):t.param.nickname.length<2||t.param.nickname.length>10?($.toast('2~10位中英文、"_"、"-"、空格'),!1):t.param.nickname.match(/^(([a-zA-Z\u4e00-\u9fa5]|[-_\s]|[\b]){2,10})$/)?t.param.mobile.match(/^1\d{10}$/)?($.showPreloader(""),void t.saveInformation()):($.toast("请输入正确的手机号码！"),!1):($.toast('2~10位中英文、"_"、"-"、空格'),!1)})},saveInformation:function(){var t=i.config.serverBase+"api/usercommon/add.json",e={name:this.param.nickname,mobile:this.param.mobile,email:this.param.email,certType:this.param.certType,certNumber:this.param.certNumber};$.ajax({url:t,type:"post",dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(t){if($.hidePreloader(),"100"===t.code)$.alert("添加成功！",function(){$.router.back()});else if("403"===t.code){var e=location.href;e=encodeURIComponent(e),$.ajax({url:"/m/api/global/visited.json?url="+e,type:"get",dataType:"json",success:function(){window.location.href=i.config.loginHref}})}else $.toast(t.msg)}})}},p={param:{},init:function(){""!==a&&(this.initHtml(),this.param=a)},initHtml:function(){var t=a,e=$("#homeEditInformation");e.find("input[name=name]").val(t.name),e.find("input[name=mobile]").val(t.mobile),e.find("input[name=email]").val(t.email),e.find("input[name=certTypeEdit]").val(t.certText),e.find("input[name=certNumber]").val(t.certNumber),this.verifincation()},verifincation:function(){var t=this,e=$("#homeEditInformation").find(".add-information");e.on("change",'input[name="mobile"]',function(){var e=$(this).val();t.param.mobile=e}),e.on("change",'input[name="name"]',function(){var e=$(this).val();t.param.name=e}),e.on("change",'input[name="email"]',function(){var e=$(this).val();t.param.email=e}),e.find('input[name="certTypeEdit"]').off("click").on("click",function(){var e=$(this);$.modal({title:"请选择证件类型",verticalButtons:!0,extraClass:"popup-certType",buttons:[{text:"身份证",close:!0,onClick:function(){t.param.certType=1,e.val("身份证")}},{text:"港澳通行证",close:!0,onClick:function(){t.param.certType=4,e.val("港澳通行证")}},{text:"学生证",close:!0,onClick:function(){t.param.certType=6,e.val("学生证")}},{text:"军官证",close:!0,onClick:function(){t.param.certType=5,e.val("军官证")}}]})}),e.on("change",'input[name="certNumber"]',function(){var e=$(this).val();t.param.certNumber=e}),e.off("click").on("click",".save-btn",function(){return""===t.param.name?($.toast("请输入昵称！"),!1):t.param.name.length<2||t.param.name.length>10?($.toast('请输入2-10位中英文字符、"_"、"-"或空格'),!1):t.param.name.match(/^(([a-zA-Z\u4e00-\u9fa5]|[-_\s]|[\b]){2,10})$/)?t.param.mobile.toString().match(/^1\d{10}$/)?($.showPreloader(),void t.saveInformation()):($.toast("请输入11位手机号码"),!1):($.toast('请输入2-10位中英文字符、"_"、"-"或空格'),!1)})},saveInformation:function(){var t=i.config.serverBase+"api/usercommon/update.json",e={code:this.param.code,name:this.param.name,mobile:this.param.mobile,email:this.param.email,certType:this.param.certType,certNumber:this.param.certNumber};$.ajax({url:t,type:"post",dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(t){if($.hidePreloader(),"100"===t.code)$.alert("修改成功！",function(){$.router.back()});else if("403"===t.code){var e=location.href;e=encodeURIComponent(e),$.ajax({url:"/m/api/global/visited.json?url="+e,type:"get",dataType:"json",success:function(){window.location.href=i.config.loginHref}})}else $.toast(t.msg)}})}};$(document).on("pageInit","#homeInformation",function(t,e,n){c.init()}),$(document).on("pageInit","#homeAddInformation",function(t,e,n){l.init()}),$(document).on("pageInit","#homeEditInformation",function(t,e,n){p.init()}),$(document).on("pageInit","#changename",function(t,e,n){s.init()})},{"../common/etpl.js":1,"../common/global.js":2,"./tpl/informationList.html":4}],4:[function(t,e,n){e.exports='<!-- for: ${data} as ${item}, ${index} --><div class="item">\t<p class="base-info">\t\t<span class="name">${item.name}</span>\t\t<span class="mobile">${item.mobile}</span>\t</p>\t<!-- if: ${item.email} -->\t<p class="email">\t\t${item.email}\t</p>\t<!-- /if -->\t<!-- if:${item.certType}>0 -->\t<p class="cert">\t\t<span>${item.certType|certTypeFormart}</span>\t\t<span>${item.certNumber}</span>\t</p>\t<!-- /if -->\t<div class="action">\t\t<!-- if: ${item.isDefault} === 1 -->\t\t<span class="set-default default" data-code="${item.code}">默认</span>\t\t<!-- else -->\t\t<span class="set-default" data-code="${item.code}">默认</span>\t\t<!-- /if -->\t\t<span class="del" data-code="${item.code}">删除</span>\t\t<span class="edit" data-code="${item.code}" data-name="${item.name}" data-mobile="${item.mobile}" data-email="${item.email}" data-certtype="${item.certType}" data-certnumber="${item.certNumber}" data-certtext="${item.certType|certTypeFormart}">编辑</span>\t</div></div><!-- /for -->'},{}]},{},[3]);
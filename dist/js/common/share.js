var GlobalKuNiao=require("../common/global.js"),KN_Share=function(){};KN_Share.prototype.initWeixin=function(e){$.ajax({url:GlobalKuNiao.config.serverBase+"jsApi/ticket",type:"GET",data:{url:e},success:function(e){e&&"100"===e.code&&wx.config({debug:!1,appId:e.jsApiTicketBean.appId,timestamp:e.jsApiTicketBean.timestamp,nonceStr:e.jsApiTicketBean.nonceStr,signature:e.jsApiTicketBean.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage"]})}})},KN_Share.prototype.onMenuShareAppMessage=function(e,n,o,t){wx.onMenuShareAppMessage({title:e,desc:t,link:n,imgUrl:o,type:"",dataUrl:"",success:function(){},cancel:function(){}})},KN_Share.prototype.onMenuShareTimeline=function(e,n,o){wx.onMenuShareTimeline({title:e,link:n,imgUrl:o,success:function(){},cancel:function(){}})},KN_Share.prototype.wechat_sendAppMsg=function(e,n,o,t){WeixinJSBridge.invoke("sendAppMessage",{img_url:e,img_width:"200",img_height:"200",link:encodeURIComponent(n),desc:encodeURIComponent(o),title:encodeURIComponent(t)},function(e){"send_app_msg:confirm"==e.err_msg?$.toast("分享成功"):$.toast("分享失败")})},KN_Share.prototype.wechat_timeLine=function(e,n,o,t){WeixinJSBridge.invoke("shareTimeline",{img_url:e,img_width:"200",img_height:"200",link:encodeURIComponent(n),desc:encodeURIComponent(o),title:encodeURIComponent(t)},function(e){"share_timeline:ok"==e.err_msg?$.toast("分享成功"):$.toast("分享失败")})},KN_Share.prototype.qq_friends=function(e,n,o,t,i,a){"undefind"==typeof t&&""!==t||(t="1105220679");var p="http://openmobile.qq.com/api/check?page=shareindex.html&style=9&status_os=0&sdkp=0&action=shareToQQ";return p+="&site="+encodeURIComponent(e),p+="&title="+encodeURIComponent(n),p+="&imageUrl="+o,p+="&appid="+t,p+="&targetUrl="+encodeURIComponent(i),p+="&page_url="+encodeURIComponent(a)},KN_Share.prototype.qzone=function(e,n,o,t,i,a){var p="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(e);return p+="&title="+n,p+="&desc="+o,p+="&summary="+t,p+="&site="+i,p+="&pics="+encodeURIComponent(a)},KN_Share.prototype.weibo=function(e,n,o,t,i){var a="http://v.t.sina.com.cn/share/share.php?";return a+="appkey="+e,a+="&ralateUid="+n,a+="&title="+encodeURIComponent(o),a+="&url="+encodeURIComponent(t),a+="&pic="+i},"object"==typeof module&&"object"==typeof module.exports?module.exports=new KN_Share:window.KN_Share=KN_Share;